---
layout: single
title: "How to install Docker in Ubuntu"
categories: setup
tags: [Docker, Ubuntu, Installation]
toc: true
author_profile: false
sidebar:
    nav: "docs"
search: true
---

*Containerization platform, Container Engine*



# Introduction

{% include video id="LXJhA3VWXFA" provider="youtube" %}

- dockerfile example

```dockerfile
# base image
FROM node:16-alpine

# wokring directory
WORKDIR /app

# app dependencies
COPY package.json package-lock.json ./
RUN npm ci

# copy source code
COPY index.js .

# execute app command
ENTRYPOINT [ "node", "index.js" ]
```









# Work Instruction

## Install Docker

- Check docker is already installed or not

```bash
docker --version
```

- if not installed, install it

```bash
sudo apt update # update package manager
sudo apt install apt-transport-https ca-certificates curl software-properties-common # install required package
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg # Add official GPG key of docker
echo "deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null # Add docker repository
sudo apt update # update package manager again
sudo apt install docker-ce # install docker
sudo systemctl start docker # start docker
sudo systemctl enable docker # set docker start when bootup
```

- Check docker status

```bash
sudo systemctl status docker # Check docker daemon is active
sudo docker ps # list docker containers which is current running
sudo docker info # docker deamon status and info
```



## Remove Docker

```bash
sudo apt purge docker-ce docker-ce-cli containerd.io # remove docker
sudo rm -rf /var/lib/docker # remove docker configuration. 
# need to backup docker related configuration before remove configuration
```





## Generate docker image

### Pull docker image from dockerhub

- Go to tensorflow/tensorflow [https://hub.docker.com/r/tensorflow/tensorflow/tags](https://hub.docker.com/r/tensorflow/tensorflow/tags) (example)
- Click gray area to copy command to clipboard

![2023-08-05_10-42-docker]({{site.url}}/images/2023-08-02-Docker/2023-08-05_10-42-docker-1691199999626-3.png)

- Go to project folder and **pull** docker image

```bash
docker pull tensorflow/tensorflow:2.13.0-gpu-jupyter
```

```bash
docker pull gcr.io/kaggle-gpu-images/python:latest
```



- Generate dockerfile from pulled docker image

```dockerfile
FROM tensorflow/tensorflow:2.13.0-gpy-jupyter
FROM nvidia/cuda:11.2.1-cudnn8-devel-ubuntu18.04 AS nvidia
```



```bash
ARG BASE_TAG=staging

FROM nvidia/cuda:11.0-cudnn8-devel-ubuntu18.04 AS nvidia
FROM gcr.io/kaggle-images/python:${BAST_TAG}
ADD clean-layer.sh /tmp/clean-layer.sh

# Cuda support
COPY --from=nvidia /etc/apt/source.list.d/cuda.list /etc/apt/sources.list.d/
COPY --from=nvidia /etc/apt/sources.list.d/nvidia-ml.list /etc/apt/sources.list.d/
COPY --from=nvidia /etc/apt/trucsted.gpg /etc/apt/trusted.gpg.d/cuda.gpg

ENV CUDA_MAJOR_VERSION=11
ENV CUDA_MINOR_VERSION=0
ENV CUDA_VERSION=$CUDA_MAJOR_VERSION.$CUDA_MINOR_VERSION
LABEL com.nvidia.volumes.needed="nvidia_driver"
LABEL comp.nvidia.cuda.version="${CUDA_VERSION}"
ENV PATH=/usr/local/nvidia/bin:/usr/local/cuda/bin:/opt/bin:${PATH}
```





- **Run** docker image

```bash
```





# Reference

- 테디노트 영상 [https://www.youtube.com/watch?v=Tw7dU-9AkmU&t=305s](https://www.youtube.com/watch?v=Tw7dU-9AkmU&t=305s)
- 드림코딩 영상 [https://www.youtube.com/watch?v=LXJhA3VWXFA](https://www.youtube.com/watch?v=LXJhA3VWXFA)
- Docker docs [https://docs.docker.com/](https://docs.docker.com/)
- **TensorFlow Docker Images** (recommended) [https://hub.docker.com/r/tensorflow/tensorflow/](https://hub.docker.com/r/tensorflow/tensorflow/)

- Deeplearning Docker Image, Deepo [https://hub.docker.com/r/ufoym/deepo/](https://hub.docker.com/r/ufoym/deepo/)
- Kaggle/docker-python image [https://github.com/Kaggle/docker-python](https://github.com/Kaggle/docker-python)